{% extends "admin/base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin/ml_projects.css') }}">
{% endblock %}

{% block content %}
<div class="admin-header">
    <h1><i class="fas fa-brain"></i> ML Projects</h1>
    <div>
        <a href="{{ url_for('admin_add_ml_project') }}" class="btn btn-admin">
            <i class="fas fa-plus"></i> Add Project
        </a>
        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-admin">
            <i class="fas fa-home"></i> Dashboard
        </a>
    </div>
</div>

<div class="filter-bar">
    <form method="GET" class="filter-form">
        <div class="form-group">
            <label for="course"><i class="fas fa-filter"></i> Filter by Course:</label>
            <select id="course" name="course" onchange="this.form.submit()">
                <option value="">All Courses</option>
                {% for course in courses %}
                <option value="{{ course._id }}" {{ 'selected' if selected_course == course._id }}>
                    {{ course.title }}
                </option>
                {% endfor %}
            </select>
        </div>
    </form>
</div>

<div class="projects-container">
    {% if projects %}
    {% for project in projects %}
    <div class="project-card">
        <div class="project-card-header">
            <h2>{{ project.title }}</h2>
            {% if project.is_featured %}
            <span class="featured-badge"><i class="fas fa-star"></i> Featured</span>
            {% endif %}
        </div>
        
        <div class="project-info">
            <div class="info-row">
                <strong><i class="fas fa-user"></i> Student:</strong>
                <span>{{ project.student_name }}</span>
            </div>
            {% if project.student_email %}
            <div class="info-row">
                <strong><i class="fas fa-envelope"></i> Email:</strong>
                <span>{{ project.student_email }}</span>
            </div>
            {% endif %}
            <div class="info-row">
                <strong><i class="fas fa-book"></i> Course:</strong>
                <span>{{ project.course_id }}</span>
            </div>
            <div class="info-row">
                <strong><i class="fas fa-calendar"></i> Created:</strong>
                <span>{{ project.created_at.strftime('%Y-%m-%d') if project.created_at else 'N/A' }}</span>
            </div>
        </div>

        {% if project.technologies %}
        <div class="project-technologies">
            {% for tech in project.technologies %}
            <span class="tech-badge">{{ tech }}</span>
            {% endfor %}
        </div>
        {% endif %}

        <div class="project-actions">
            <a href="{{ url_for('admin_edit_ml_project', project_id=project._id) }}" class="btn btn-edit">
                <i class="fas fa-edit"></i> Edit
            </a>
            {% if project.github_url %}
            <a href="{{ project.github_url }}" target="_blank" class="btn btn-github">
                <i class="fab fa-github"></i> GitHub
            </a>
            {% endif %}
            <form method="POST" action="{{ url_for('admin_delete_ml_project', project_id=project._id) }}" class="delete-form">
                <button type="submit" class="btn btn-delete" onclick="return confirm('Are you sure you want to delete this project?')">
                    <i class="fas fa-trash-alt"></i> Delete
                </button>
            </form>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="empty-state">
        <i class="fas fa-folder-open"></i>
        <h3>No ML Projects Found</h3>
        <p>Start by adding a new project.</p>
        <a href="{{ url_for('admin_add_ml_project') }}" class="btn btn-admin">
            <i class="fas fa-plus"></i> Add First Project
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}

